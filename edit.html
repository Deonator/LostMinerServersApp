<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>–°–æ–∑–¥–∞–Ω–∏–µ / —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a href="index.html">‚Üê –ù–∞–∑–∞–¥</a>
  <h1>üõ†Ô∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</h1>

  <input id="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
  <input id="type" placeholder="–¢–∏–ø" />
  <input id="ip" placeholder="IP-–∞–¥—Ä–µ—Å" />
  <select id="status">
    <option value="online">üü¢ –û–Ω–ª–∞–π–Ω</option>
    <option value="offline">üî¥ –û—Ñ—Ñ–ª–∞–π–Ω</option>
  </select>
  <textarea id="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
  <button onclick="saveServer()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
<script>
  const banned = JSON.parse(localStorage.getItem("bannedUsers") || "[]");
  const currentID = localStorage.getItem("userID");
  if (banned.includes(currentID)) {
    alert("üö´ –í—ã –∑–∞–±–∞–Ω–µ–Ω—ã –∏ –Ω–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä.");
    window.location.href = "index.html";
  }
</script>

  <script>
    function getServers() {
      return JSON.parse(localStorage.getItem('servers') || '[]');
    }
    function setServers(data) {
      localStorage.setItem('servers', JSON.stringify(data));
    }
    function getMyId() {
      return localStorage.getItem('myServerId');
    }

    const servers = getServers();
    const myId = getMyId();
    const current = servers.find(s => s.id === myId);

    if (current) {
      document.getElementById('name').value = current.name;
      document.getElementById('type').value = current.type;
      document.getElementById('ip').value = current.ip;
      document.getElementById('status').value = current.status;
      document.getElementById('description').value = current.description;
    }

    function saveServer() {
      const name = document.getElementById('name').value.trim();
      const type = document.getElementById('type').value.trim();
      const ip = document.getElementById('ip').value.trim();
      const status = document.getElementById('status').value;
      const description = document.getElementById('description').value.trim();

      if (!name || !ip) return alert("–ù–∞–∑–≤–∞–Ω–∏–µ –∏ IP –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã!");

      let servers = getServers();
      let id = getMyId();

      if (!id) {
        id = Math.random().toString(36).substr(2, 9);
        localStorage.setItem('myServerId', id);
      }

      const data = { id, name, type, ip, status, description };
      const index = servers.findIndex(s => s.id === id);
      if (index !== -1) servers[index] = data;
      else servers.push(data);
      setServers(servers);

      alert("‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
